($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/trips.trip-flow-selector",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","@ta/overlays.toast","@ta/common.webview","ta-platform","@ta/social.login-gate","@ta/social.onboarding-state","lithium-platform","@ta/trips.saver","@ta/trips.trip-types","@ta/trips.trip-constants","@ta/trips.tracking","@ta/trips.trip-util","@ta/trips.trip-toasts","@ta/common.localstorage","@ta/overlays.managers","@ta/overlays.modal","@ta/overlays.headers","vendor-apollo-libs","ta-common","@ta/trips.graphql"],e:["./packages/trips/trip-flow-selector/index.jsx"],x:{"./packages/trips/trip-flow-selector/index.jsx":["TripFlowSelector","QueriedTripFlowSelector","RemoteSTATModalProvider"]},m:{"./packages/trips/trip-flow-selector/index.jsx":function(e,t,r){"use strict";r.r(t);var o,a=r("@babel/runtime/helpers/esm/extends"),n=r.n(a),i=r("@babel/runtime/helpers/esm/toConsumableArray"),s=r.n(i),l=r("@babel/runtime/helpers/esm/classCallCheck"),c=r.n(l),p=r("@babel/runtime/helpers/esm/createClass"),u=r.n(p),d=r("@babel/runtime/helpers/esm/possibleConstructorReturn"),v=r.n(d),m=r("@babel/runtime/helpers/esm/getPrototypeOf"),f=r.n(m),T=r("@babel/runtime/helpers/esm/inherits"),S=r.n(T),_=r("@babel/runtime/helpers/esm/assertThisInitialized"),E=r.n(_),h=r("@babel/runtime/helpers/esm/defineProperty"),g=r.n(h),C=r("react"),b=r("react-redux"),A=r("@ta/overlays.toast"),y=r("@ta/common.webview"),M=r("@ta/common.routing"),I=r("@ta/social.login-gate"),O=r("@ta/social.onboarding-state"),k=r("@ta/common.tracking"),P=r.n(k),L=r("@ta/common.features"),j=r("@ta/trips.saver"),D=r.n(j),w=(r("@ta/trips.trip-types"),r("@ta/trips.trip-constants")),N=r("@ta/trips.tracking"),U=r("@ta/trips.trip-util"),R=r("@ta/trips.trip-toasts"),x=r("@ta/common.localstorage"),F=r.n(x),G=r("@babel/runtime/helpers/esm/objectSpread"),B=r.n(G),V=r("@ta/overlays.managers"),q=r("@ta/overlays.modal"),z=r("@ta/overlays.headers"),Q=r("react-apollo"),H=r("@ta/styleguide.loading"),W=r("@ta/loading.error"),Y=r("@ta/common.i18n"),K=r("@ta/trips.graphql"),X=r("@ta/platform.import"),$=Object.freeze({DEFAULT:function e(){return Object(Y.localize)("stat_modal_save_to_trip_v2")},CREATE:function e(){return Object(Y.localize)("stat_modal_create_a_trip_v2")},SELECT:function e(){return Object(Y.localize)("select_trip_header")},SELECT_CREATE:function e(){return Object(Y.localize)("stat_modal_create_a_trip_v2")}}),Z=function e(t){var r=C.useContext(M.RouteContext).route,o="Trips"===(null==r?void 0:r.page),a=Object(K.selectQuery)("STAT_MODAL",o?"TRIP_DETAIL":t.placement);return C.createElement(Q.Query,{query:null==a?void 0:a.query,displayName:null==a?void 0:a.displayName,notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only",errorPolicy:"all",variables:{offset:0,limit:10,userId:t.userId,reference:Object(U.toReference)(t.saveObject),loadSavedTrips:!0,socialReference:Object(L.featureIsEnabled)("social_at_referencing_profile_links")},onCompleted:t.onQueryComplete},function(e){var r=e.data,o=e.loading,a=e.error,n=e.refetch,i=e.fetchMore,l=Object(L.featureIsEnabled)("trips_skip_check_whitelist_public_trips");return C.createElement(Q.Query,{skip:l,query:K.GetUserAuthZInfo},function(e){var c,p,u,d=(null==r?void 0:r.paginatedTrips)||{},v=d.trips,m=void 0===v?[]:v,f=d.hasMore,T=void 0===f||f,S=(r||{}).savedTrips,_=void 0===S?[]:S;o?u=C.createElement(H.LoadingSpinner,{size:"large"}):!m&&a&&(u=C.createElement(W.LoadingErrorMessage,{refetch:n}));var E=new Set(_.map(function(e){return e.id}).filter(Boolean)),h=B()({},e),g=l||(null===(c=h.data)||void 0===c?void 0:null===(p=c.authzInfo)||void 0===p?void 0:p.canMakePublicTrip),b={loadingNode:u,tripList:m,saveSet:E,hasMore:T,getMoreTrips:function e(){return i({variables:{offset:(null==m?void 0:m.length)||0,loadSavedTrips:!1},updateQuery:function e(t,r){var o=r.fetchMoreResult;return o?Object.assign({},t,{paginatedTrips:{trips:[].concat(s()(t.paginatedTrips.trips),s()(o.paginatedTrips.trips)),hasMore:o.paginatedTrips.hasMore,__typename:t.paginatedTrips.__typename},savedTrips:t.savedTrips}):t}})},canMakePublicTrip:g};return t.children(b)})})},J=X.component.onUsage(((o=function e(){return r.e("@ta/trips.tracking")}).__PACKAGE__="@ta/trips.trip-flow-selector",o.__MODULE_ID__="@ta/trips.tracking",o.__MODULE_NAME__="@ta/trips.tracking",o.__BUNDLE_NAME__="@ta/trips.tracking",o.__GET_SYNC__=function(){return r.m["@ta/trips.tracking"]?r("@ta/trips.tracking"):null},o.__IS_LOADED__=function(){return void 0!==r.m["@ta/trips.tracking"]},o),"TripInteraction"),ee=X.component.onUsage(function(){var e=function e(){return r.e("@ta/trips.create-trip-modal")};return e.__PACKAGE__="@ta/trips.trip-flow-selector",e.__MODULE_ID__="@ta/trips.create-trip-modal",e.__MODULE_NAME__="@ta/trips.create-trip-modal",e.__BUNDLE_NAME__="@ta/trips.create-trip-modal",e.__GET_SYNC__=function(){return r.m["@ta/trips.create-trip-modal"]?r("@ta/trips.create-trip-modal"):null},e.__IS_LOADED__=function(){return void 0!==r.m["@ta/trips.create-trip-modal"]},e}(),"CreateTripWithAddItemModal",C.createElement("div",{className:"trips-trip-flow-selector-STATModal__loadingContainer--1tP79"},C.createElement(H.LoadingSpinner,{size:"large"}))),te=X.component.onUsage(function(){var e=function e(){return r.e("@ta/trips.create-trip-modal")};return e.__PACKAGE__="@ta/trips.trip-flow-selector",e.__MODULE_ID__="@ta/trips.create-trip-modal",e.__MODULE_NAME__="@ta/trips.create-trip-modal",e.__BUNDLE_NAME__="@ta/trips.create-trip-modal",e.__GET_SYNC__=function(){return r.m["@ta/trips.create-trip-modal"]?r("@ta/trips.create-trip-modal"):null},e.__IS_LOADED__=function(){return void 0!==r.m["@ta/trips.create-trip-modal"]},e}(),"CreateTripWithMoveItemModal",C.createElement("div",{className:"trips-trip-flow-selector-STATModal__loadingContainer--1tP79"},C.createElement(H.LoadingSpinner,{size:"large"}))),re=X.component.onUsage(function(){var e=function e(){return r.e("@ta/trips.save-to-trip-modal")};return e.__PACKAGE__="@ta/trips.trip-flow-selector",e.__MODULE_ID__="@ta/trips.save-to-trip-modal",e.__MODULE_NAME__="@ta/trips.save-to-trip-modal",e.__BUNDLE_NAME__="@ta/trips.save-to-trip-modal",e.__GET_SYNC__=function(){return r.m["@ta/trips.save-to-trip-modal"]?r("@ta/trips.save-to-trip-modal"):null},e.__IS_LOADED__=function(){return void 0!==r.m["@ta/trips.save-to-trip-modal"]},e}(),"SaveToTripContent",C.createElement("div",{className:"trips-trip-flow-selector-STATModal__loadingContainer--1tP79"},C.createElement(H.LoadingSpinner,{size:"large"}))),oe=function(e){function t(e){var r;return c()(this,t),r=v()(this,f()(t).call(this,e)),g()(E()(E()(r)),"onModalClose",function(){r.props.onClose(),r.setSplashLoad(!0)}),g()(E()(E()(r)),"clearSplashLoad",function(){r.setSplashLoad(!1)}),r.state={splashLoad:!0},r}return S()(t,e),u()(t,[{key:"setSplashLoad",value:function e(t){this.state.splashLoad!==t&&this.setState({splashLoad:t})}},{key:"render",value:function e(){var t=this,r=$[this.props.overlayState](),o=C.createElement(z.TitleBar,{iconName:"suitcase",displayType:"LEFT_ALIGN_GRAY"},r),a=this.props,n=a.loggedInUserId,i=a.saveObject,s=a.modalName,l=a.placement;return C.createElement(q.Modal,{name:s,header:o,isFullBleed:!0,onClose:this.onModalClose},C.createElement(V.Opener,{name:s},function(e,r){return C.createElement(V.Closer,null,function(e){return C.createElement(Z,{userId:n,saveObject:i,onQueryComplete:function e(){r&&t.clearSplashLoad()},placement:l||"DEFAULT"},function(r){return r.loadingNode&&t.state.splashLoad?C.createElement("div",{className:"trips-trip-flow-selector-STATModal__loadingContainer--1tP79"},r.loadingNode):t.content(e,r)})})}))}},{key:"content",value:function e(t,r){var o=this,a=this.props,n=a.saveObject,i=a.lastSavedItem,s=a.trackingContext,l=a.onError,c=Object(U.toSavesObject)(i),p=C.createElement(J,{source:"trips",trackingContext:s,pageAsContext:!0,withSaveSession:!0},function(e){return C.createElement("div",{className:"trips-trip-flow-selector-STATModal__modalPadding--36qa6"},C.createElement(ee,{object:n,onMount:function t(){r.loadingNode||e({elementClick:{element:"createTrip"}})},onAddedToCreatedTrip:function e(r){o.props.statCallback("ADD","NEW",r,!0,!0),t()},onError:l,canMakePublicTrip:r.canMakePublicTrip,placement:o.props.placement||"DEFAULT"}))});switch(this.props.overlayState){case"DEFAULT":return 0===r.tripList.length?p:C.createElement(J,{source:"trips",trackingContext:s,pageAsContext:!0,withSaveSession:!0},function(e){return C.createElement(re,{tripList:r.tripList,savedSet:r.saveSet,tripListBottom:r.loadingNode,onPaginate:r.getMoreTrips,hasMore:r.hasMore,saveObject:n,onMount:function t(){o.props.preventInteractionInMountedComponents||e({elementClick:{element:"stat"}})},onCreateTrip:function e(){o.props.onCreateTripClicked&&o.props.onCreateTripClicked()},tripAction:"SAVE",onRemovedFromTrip:function e(r,a,n){o.props.statCallback("REMOVE","EXISTING",r,a,n),t()},onSavedToTrip:function e(r,a,n){o.props.statCallback("ADD","EXISTING",r,a,n),t()},onError:l,placement:o.props.placement||"DEFAULT"})});case"CREATE":return p;case"SELECT":return c?C.createElement(J,{source:"trips",trackingContext:s,pageAsContext:!0,withSaveSession:!0},function(e){return C.createElement(re,{tripList:r.tripList,savedSet:r.saveSet,tripListBottom:r.loadingNode,onPaginate:r.getMoreTrips,hasMore:r.hasMore,saveObject:c,onMount:function t(){e({elementClick:{element:"stat"}})},onCreateTrip:function e(){o.props.onSelectCreateTripClicked&&o.props.onSelectCreateTripClicked()},tripAction:"MOVE",onMovedToTrip:function e(r,a,n){o.props.statCallback("MOVE","EXISTING",r,a,n),t()},onRemovedFromTrip:function e(r,a,n){o.props.statCallback("REMOVE","EXISTING",r,a,n),t()},onError:l,placement:o.props.placement||"DEFAULT"})}):"";case"SELECT_CREATE":return i?C.createElement("div",{className:"trips-trip-flow-selector-STATModal__modalPadding--36qa6"},C.createElement(te,{item:i,onMovedToCreatedTrip:function e(r){o.props.statCallback("MOVE","NEW",r,!0,!0),t()},canMakePublicTrip:r.canMakePublicTrip,placement:this.props.placement||"DEFAULT"})):p;default:return""}}}]),t}(C.PureComponent);g()(oe,"defaultProps",{placement:"DEFAULT"});var ae=oe,ne=C.createContext(void 0),ie=ne.Consumer,se=ne.Provider,le=function(e){function t(e){var r;return c()(this,t),r=v()(this,f()(t).call(this,e)),g()(E()(E()(r)),"localModalSuffix","".concat(Math.random())),r.state={statProps:null,openCount:0,openModal:function e(){}},r}return S()(t,e),u()(t,[{key:"componentDidUpdate",value:function e(t,r){this.state.openCount>r.openCount&&this.state.openModal()}},{key:"setStatProps",value:function e(t,r){var o=r?{openModal:r,openCount:this.state.openCount+1}:{};this.setState(B()({statProps:t},o))}},{key:"render",value:function e(){var t=this,r=this.state.statProps,o=this.props,a=o.children,i=o.localStats,s=r||i,l=(s||{}).saveObject,c=void 0===l?{}:l,p="save-to-a-trip-modal-".concat(c.id,"-").concat(c.type,"-").concat(this.localModalSuffix),u=null===i?"RemoteStatModal":p;return C.createElement(C.Fragment,null,s&&C.createElement(ae,n()({},s,{modalName:u})),C.createElement(V.Opener,{name:u},function(e){return C.createElement(V.Closer,null,function(r){var o={name:u,open:e,close:r,setStatProps:t.setStatProps.bind(t)};return C.createElement(se,{value:o},a(o))})}))}}]),t}(C.PureComponent);g()(le,"defaultProps",{localStats:null});var ce=function(e){function t(){var e,r;c()(this,t);for(var o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return r=v()(this,(e=f()(t)).call.apply(e,[this].concat(a))),g()(E()(E()(r)),"remoteProps",null),r}return S()(t,e),u()(t,[{key:"displayChildren",value:function e(t){var r=this;return this.remoteProps=t,this.props.children(t.name,t.close,function e(o){var a=B()({},r.props.statProps,{overlayState:o||r.props.statProps.overlayState});t.setStatProps(a,t.open)}.bind(this))}},{key:"componentDidUpdate",value:function e(t){var r,o,a;(null==t?void 0:null===(r=t.statProps)||void 0===r?void 0:r.overlayState)!==(null===(o=this.props)||void 0===o?void 0:null===(a=o.statProps)||void 0===a?void 0:a.overlayState)&&this.remoteProps&&this.remoteProps.setStatProps(this.props.statProps)}},{key:"render",value:function e(){var t=this;return C.createElement(ie,null,function(e){return e?t.displayChildren(e):C.createElement(le,{localStats:t.props.statProps},function(e){return t.displayChildren(e)})})}}]),t}(C.PureComponent),pe=["Profile","HomeFeed","Trips","TripsWebview","Home"],ue=function(e){function t(e){var r;return c()(this,t),r=v()(this,f()(t).call(this,e)),g()(E()(E()(r)),"launchToast",void 0),g()(E()(E()(r)),"removeToast",void 0),g()(E()(E()(r)),"openSTATModal",void 0),g()(E()(E()(r)),"removeHash",function(){if(r.hasPopStatHash()){var e=window.location.toString();if(e.indexOf("#")>0){var t=e.substring(0,e.indexOf("#"));window.history.replaceState({},document.title,t)}}}),g()(E()(E()(r)),"hasPopStatHash",function(){var e,t;return"#POPSTAT"===(null===(e=window)||void 0===e?void 0:null===(t=e.location)||void 0===t?void 0:t.hash)}),g()(E()(E()(r)),"popStatEnabled",function(){return r.props.allowPopStatModal&&r.hasPopStatHash()&&Object(L.featureIsEnabled)("trips_pop_stat_modal")}),g()(E()(E()(r)),"onComplete",function(e){r.props.onComplete&&r.props.onComplete(e),r.props.resetSaveSession(),r.removeHash()}),g()(E()(E()(r)),"onModalClose",function(){r.setState({overlayState:"DEFAULT",preventInteractionInMountedComponents:!1}),r.props.resetSaveSession(),r.removeHash()}),g()(E()(E()(r)),"onCreateTripClicked",function(){r.setState({overlayState:"CREATE"})}),g()(E()(E()(r)),"onSelectCreateTripClicked",function(){r.setState({overlayState:"SELECT_CREATE"})}),g()(E()(E()(r)),"onUndoRemoveAction",function(e){r.launchTripToast(Object(R.viewTripToast)(e,"SAVED")),r.setState({overlayState:"DEFAULT"}),r.onComplete(!0)}),g()(E()(E()(r)),"getFirstCommentBody",function(e){var t=e.comments;return t&&t.length>0?t[0].body:null}),g()(E()(E()(r)),"openFlow",function(e,t,o){return function(){var a=Object(U.toSavesObject)(r.props.object);if(a){if(!y.NativeBridge.isNativeWebview()||!y.NativeBridge.isActionSupported("presentSavesModal",2))return o().then(function(){var o=r.getMostRecentlyAddedToTrip();return!r.props.active&&o&&"savesItem"!==a.type?t(o):e(),r.state.overlayState});var n=a.id,i=a.type,s=a.originalObject,l=r.getFirstCommentBody(r.props.object);y.NativeBridge.showSavesModal({id:n,type:i,note:l,originalObject:s&&{type:s.type,id:s.id}})}}}),g()(E()(E()(r)),"onSuccessfulAutosave",function(e,t,o){r.launchTripToast(Object(R.autoSavedToTripToast)(e,function e(){r.setState({overlayState:"SELECT"}),o("SELECT")},r.removeToast)),r.setState({overlayState:"DEFAULT",lastAutosavedItem:t}),r.onComplete(!0)}),g()(E()(E()(r)),"onSuccessfulSave",function(e,t){r.setState({overlayState:"DEFAULT",preventInteractionInMountedComponents:!0}),r.launchTripToast(Object(R.viewTripToast)(e,t)),r.setMostRecentlyAddedToTrip(e.id),r.props.attemptOnboarding&&r.props.setFireOnboarding(!1,"SAVE_ACTION"),r.onComplete(!0)}),g()(E()(E()(r)),"onSaveError",function(e){r.launchTripToast(Object(R.tripsErrorTripToast)(e))}),r.state={overlayState:"DEFAULT",lastAutosavedItem:null,preventInteractionInMountedComponents:!1},r}return S()(t,e),u()(t,[{key:"componentDidMount",value:function e(){this.openSTATModal&&this.popStatEnabled()&&(this.props.logInteraction({elementClick:{element:"autoPopStat"}}),this.openSTATModal())}},{key:"launchTripToast",value:function e(t){this.launchToast&&this.launchToast.apply(this,s()(t))}},{key:"showUndoRemoveToast",value:function e(t){var r=Object(U.toSavesObject)(this.props.object);r&&this.launchTripToast(Object(R.removeFromTripToast)(t,r,this.props.placement,this.onUndoRemoveAction))}},{key:"setMostRecentlyAddedToTrip",value:function e(t){F.a.set(w.MOST_RECENTLY_ADDED_TO_TRIP,{tripId:t,userId:this.props.loggedInUserId},144e5)}},{key:"getMostRecentlyAddedToTrip",value:function e(){if(this.popStatEnabled())return null;var t=F.a.get(w.MOST_RECENTLY_ADDED_TO_TRIP);return t&&t.userId===this.props.loggedInUserId?t.tripId:null}},{key:"render",value:function e(){var t=this;if(!Object(L.featureIsEnabled)("trips_bookmark"))return null;var r=this.props,o=r.children,a=r.logInteraction,n=r.puid,i=r.object,s=r.preventInteractionPropagation,l=r.trackingContext,c=r.loggedInUserId,p=r.placement,u=r.resaveTrip,d=r.saveSessionTracking,v=Object(U.toSavesObject)(i);if(!v)return null;var m={modalName:"",saveObject:v,loggedInUserId:c,overlayState:this.state.overlayState,lastSavedItem:this.state.lastAutosavedItem,trackingContext:l,onCreateTripClicked:this.onCreateTripClicked,onSelectCreateTripClicked:this.onSelectCreateTripClicked,onClose:this.onModalClose,onError:this.onSaveError,preventInteractionInMountedComponents:this.state.preventInteractionInMountedComponents,statCallback:function e(r,o,a,n,i){"REMOVE"===r?(t.showUndoRemoveToast(a),t.onComplete(i)):"NEW"===o?t.onSuccessfulSave(a,"CREATED"):n&&t.onSuccessfulSave(a,"SAVED")},placement:p};return C.createElement(M.RouteConsumer,null,function(e){var r=e.route;return C.createElement(C.Fragment,null,C.createElement(I.SocialLoginGate,{tracking:{source:"trips",element:"ITEM_SAVE_LOGIN",attributes:{context:r?Object(N.getInteractionsContext)(r.page):void 0,puid:n,saveType:v.type&&v.type.toUpperCase(),detailId:v.id&&"".concat(v.id),tripId:null==u?void 0:u.id,sessionType:"SAVE",sessionUuid:d.sessionUuid,sessionOrder:d.sessionOrder}},pid:r&&r.page&&pe.includes(r.page)?40439:39766,flow:"SAVES_COMBINED"},function(e){return C.createElement(ce,{statProps:m},function(n,i,l){return C.createElement(C.Fragment,null,C.createElement(D.a,{object:v,onSave:function e(r,o){a({modalSuccess:{element:"quickSave"}}),t.onSuccessfulAutosave(r,o,l)},placement:p,onError:t.onSaveError},function(n){return t.openSTATModal=t.openFlow(l,n,e),C.createElement("span",{onClick:function e(o){o.stopPropagation(),o.preventDefault(),!s&&c&&a({elementClick:{element:"item_save",tripId:null==u?void 0:u.id}});var n=t.props.active?"is_saved":"not_saved";P()({action:"saveCTA_click",module:"Trips|".concat(r.page),context:"Trips|".concat(v.type,"|").concat(n)})}},o(t.openSTATModal))}))})}),C.createElement(A.Toaster,null,function(e,r){return t.launchToast=e,t.removeToast=r,null}))})}}]),t}(C.Component);g()(ue,"defaultProps",{preventInteractionPropagation:!1,attemptOnboarding:!0,onComplete:void 0,trackingContext:void 0,placement:void 0,allowPopStatModal:!1});var de=Object(b.connect)(function e(t){return{loggedInUserId:t.auth.loggedInUserId}},function e(){return{setFireOnboarding:O.ACTIONS.setShouldFire}})(function e(t){return C.createElement(N.SaveSessionProvider,null,function(e,r){return C.createElement(N.TripInteraction,{source:"trips",trackingContext:t.trackingContext,saveObject:Object(U.toSavesObject)(t.object),withSaveSession:!0,pageAsContext:!0},function(o,a){return C.createElement(ue,n()({},t,{saveSessionTracking:e,resetSaveSession:r,logInteraction:o,puid:a}))})})}),ve=r("@ta/common.logging"),me=r.n(ve),fe=new(r("@ta/common.state").PrivateStateAccessor)("is-saved-state",{savedMap:{}}),Te=function e(t,r){return"".concat(t).concat(r)},Se={updateSaved:function e(t,r,o){return fe.action({type:"UPDATE_SAVED",saveId:t,saveType:r,isSaved:o})}};fe.setReducerIfUnset(function(e,t){var r=e.savedMap,o=t.saveId,a=t.saveType,n=t.isSaved,i=t.type,s=B()({},r);return o&&a&&"UPDATE_SAVED"===i&&(s[Te(o,a)]=n),{savedMap:s}});var _e=function e(t,r){return!0===t||!1===t?t:r},Ee=function e(t){switch(null==t?void 0:t.page){case"Home":return"HOME";case"Profile":return"PROFILE";case"Trips":return(null==t?void 0:t.tripId)?"TRIP_DETAIL":"TRIPS";default:return"DEFAULT"}},he=function e(t){var r=t.object,o=t.preventInteractionPropagation,a=t.trackingContext,n=t.children,i=t.isActive,s=t.updateSaved,l=t.ssr,c=t.trip,p=t.allowPopStatModal,u=C.useContext(M.RouteContext).route;if(!Object(L.featureIsEnabled)("trips_bookmark"))return null;var d=Object(U.toSavesObject)(r);if(!d)return me.a.error("An invalid saves object was passed to QueriedTripFlowSelector"),null;var v=Object(U.objectStatisticQuery)(d)||{},m=v&&null===_e(i,null);return C.createElement(Q.Query,{query:v.query,variables:v.variables,ssr:l,skip:!m,onCompleted:function e(t){if(m){var r=t&&t.savesObjects&&t.savesObjects[0];if(r){var o=function e(t,r){return t===K.LocationStatistics?r.locationId:t===K.AttractionStatistics?r.attractionProductId:r.id}(v.query,r),a=r.socialStatistics,n=void 0===a?{}:a,i=o===d.id&&!!n.isSaved;s(d.id,d.type,i)}}}},function(){return C.createElement(de,{object:r,active:!!i,preventInteractionPropagation:o,trackingContext:a,onComplete:function e(t){s(d.id,d.type,t)},placement:Ee(u),resaveTrip:c,allowPopStatModal:p},function(e){return n(e,!!i)})})};he.defaultProps={object:null,ssr:!1,trackingContext:void 0,allowPopStatModal:!1};var ge=Object(b.connect)(function(e,t){var r,o,a=function e(t,r){var o=r?Te(r.id,r.type):"";return fe.getFrom(t).savedMap[o]}(e,Object(U.toSavesObject)(t.object)),n=null===(r=t.object)||void 0===r?void 0:null===(o=r.socialStatistics)||void 0===o?void 0:o.isSaved,i=_e(a,n);return{loggedInUserId:e.auth.loggedInUserId,isActive:i}},{updateSaved:Se.updateSaved})(he);r.d(t,"TripFlowSelector",function(){return de}),r.d(t,"QueriedTripFlowSelector",function(){return ge}),r.d(t,"RemoteSTATModalProvider",function(){return le})}}});
//# sourceMappingURL=trips.trip-flow-selector.2afa7e8607.js.map