($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/trips.save-to-trip",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","lithium-platform","ta-platform","@ta/common.timer","@ta/overlays.popover","@ta/overlays.toast","@ta/trips.trip-flow-selector","@ta/trips.bookmark-icon","@ta/trips.trip-state"],e:["./packages/trips/save-to-trip/SaveToTripWidget.jsx"],x:{"./packages/trips/save-to-trip/SaveToTripWidget.jsx":["default","ssrQueries"]},m:{"./packages/trips/save-to-trip/SaveToTripWidget.jsx":function(t,e,o){"use strict";o.r(e);var a=o("@babel/runtime/helpers/esm/defineProperty"),r=o.n(a),n=o("react"),i=o("react-redux"),s=o("@ta/common.classnames"),c=o.n(s),l=o("@ta/common.logging"),p=o.n(l),m=o("@ta/common.i18n"),u=o("@ta/common.radio"),d=o.n(u),v=o("@ta/common.timer"),k=o.n(v),_=o("@ta/common.tracking"),f=o.n(_),g=o("@ta/overlays.popover"),b=o.n(g),S=o("@ta/overlays.toast"),h=o("@ta/trips.trip-flow-selector"),T=o("@ta/trips.bookmark-icon"),E=o("@ta/trips.trip-state");o.d(e,"ssrQueries",function(){return y});var I=function t(e,o,a,r){return"listing"===a?n.createElement(T.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"stacked",bookmarkSize:"30"}):["hotspot_and_tooltip","hotspot_tooltip_toaster"].includes(a)?n.createElement(T.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"stacked",bookmarkSize:"30"},function(){return n.createElement("div",{className:"trips-save-to-trip-SaveToTripWidget__hotspot_target--3FS0f"})}):["hotspot_and_tooltip_detail","hotspot_tooltip_toaster_detail"].includes(a)?"DESKTOP"===r?n.createElement(T.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"20",decorated:!1},function(t){return n.createElement(n.Fragment,null,n.createElement("div",{className:"trips-save-to-trip-SaveToTripWidget__hotspot_target_detail--3IsKo"}),n.createElement("span",{className:"trips-save-to-trip-SaveToTripWidget__normal--TlAX2"},t))}):n.createElement(T.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"stacked",bookmarkSize:"24"},function(){return n.createElement("div",{className:"trips-save-to-trip-SaveToTripWidget__hotspot_target_detail--3IsKo"})}):["responsive_review","forum_post"].includes(a)?"DESKTOP"===r?n.createElement(T.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"20",decorated:!1},function(t){return n.createElement("span",{className:"trips-save-to-trip-SaveToTripWidget__normal--TlAX2"},t)}):n.createElement(T.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"24"}):"mobile_review"===a?n.createElement(T.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"24"}):"mobile_restaurant_review"===a?n.createElement(T.BookmarkIcon,{active:e,onClick:o,vertical:!0,bookmarkStyle:"outline",bookmarkSize:"22",decorated:!1},function(t){return n.createElement("span",{className:"trips-save-to-trip-SaveToTripWidget__small--1YVmk"},t)}):"mobile_attraction_product_detail"===a?n.createElement(T.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"stacked",bookmarkSize:"24"}):(p.a.warn("Widget style not found: ".concat(a)),null)},y=(e.default=Object(i.connect)(function(t){var e=Object(E.getState)(t);return{viewportCategory:t.meta.device.viewportCategory,hotspotIds:e.hotspotIds,hotspotAll:e.hotspotAll}},{setHotspotIds:E.ACTIONS.setHotspotIds,setHotspotPage:E.ACTIONS.setHotspotPage,clearHotspot:E.ACTIONS.clearHotspot})(function t(e){var o=e.object,a=e.widgetStyle,i=e.tooltipCopy,s=e.toastCopy,l=e.allowPopStatModal,p=e.viewportCategory,u=e.hotspotIds,v=e.hotspotAll,_=e.setHotspotIds,g=e.setHotspotPage,T=e.clearHotspot,E=n.useRef(null),y=u.includes(o.locationId)||v;return n.useEffect(function(){var t=function t(){"hotspot_tooltip_toaster"===a?f()({module:"saves_nux",action:"shown"}):"hotspot_tooltip_toaster_detail"===a&&f()({module:"saves_nux_detail",action:"shown"})},e=function e(){t(),_([o.locationId])},r=function e(){t(),g(!0)};return d()("save-to-trip").on("hotspot-".concat(o.locationId),e),d()("save-to-trip").on("hotspot-page",r),d()("save-to-trip").emit("wc-widgets-loaded"),function(){d()("save-to-trip").off("hotspot-".concat(o.locationId),e),d()("save-to-trip").off("hotspot-page",r)}},[o.locationId,a,_,g]),n.useEffect(function(){if(E.current&&y){var t=E.current.getBoundingClientRect();(t.top<0||t.bottom>window.innerHeight)&&setTimeout(function(){E.current&&E.current.scrollIntoView({behavior:"smooth",block:"center"})},0)}},[y,u]),["hotspot_and_tooltip","hotspot_and_tooltip_detail","hotspot_tooltip_toaster","hotspot_tooltip_toaster_detail"].includes(a)?"hotspot_tooltip_toaster"!==a&&"hotspot_tooltip_toaster_detail"!==a||"MOBILE"!==p?n.createElement(b.a,{leftOf:!0,contents:function t(e){return n.createElement("span",{className:"trips-save-to-trip-SaveToTripWidget__popover--Vd6Xg",onClick:e},i?Object(m.unescaped)(i):Object(m.localize)("save_hotels_nux_h_body"))},onClose:T,local:!0,closeButton:!1,overlayType:"popover"},function(t,e){var i=function t(){y&&"MOBILE"!==p&&e()};return n.createElement(h.QueriedTripFlowSelector,{object:o},function(o,s){return n.createElement("span",{ref:function e(o){E.current=o,t(o)},onMouseOver:e,onFocus:e,className:c()(r()({},"trips-save-to-trip-SaveToTripWidget__hotspot--3RvXe",y))},I(s,o,a,p),n.createElement(k.a,{trigger:i,interval:0}))})}):n.createElement(n.Fragment,null,n.createElement(h.QueriedTripFlowSelector,{object:o},function(t,e){return n.createElement("span",{ref:function t(e){E.current=e},className:c()(r()({},"trips-save-to-trip-SaveToTripWidget__hotspot--3RvXe",y))},I(e,t,a,p))}),s&&y&&n.createElement(S.Toaster,{onToastRemoved:T},function(t,e){return n.createElement(k.a,{trigger:function o(){t({node:n.createElement("span",null,Object(m.unescaped)(s)),cta:n.createElement("span",{onClick:function t(){e("stthotspot"),T()}},Object(m.localize)("saves_toast_dismiss")),timeout:1e4,id:"stthotspot"})},interval:0})})):n.createElement(h.QueriedTripFlowSelector,{object:o,allowPopStatModal:l},function(t,e){return I(e,t,a,p)})}),function t(){return[]})}}});
//# sourceMappingURL=trips.save-to-trip.a4c7cadb33.js.map