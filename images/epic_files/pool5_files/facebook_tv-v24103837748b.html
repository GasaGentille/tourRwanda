
<!-- saved from url=(3559)https://www.jscache.com/static/page_moniker/facebook_tv-v24103837748b.html#pixelType=PAGEVIEW&curLocId=13305964&geoId=6387380&locPrices=110&tadomain=tripadvisor.com&reqUnique=e3e5185e407ff3580acc178f199559b8ec4b2301&userUnique=66d12184cacfb0f85ab7df7f3baae23587a18add&fbUserUnique=f8489f4079c145514a8dc1dc045a3a7f477ee0f5aab0670124b04d001f76e618&criteoHEml=7afdef21fead1d2976d3ebce357db6969ed3dc5ea595b1f8d486e41dfaa9b9de&fbHEml=79a119f657cbb933c5bdc295d3155909cbbf49a1827b81df8f1f8a933aba45a4&rtbHEml=ec1c190b3969c7866873e048c5dda3a72d316c6024ae38e01549803307c985fa&locale=en_US&countryID=191&ipCountryAbbrev=US&seqId=50&sessionId=C50FB55BD3058148E875D1B42FAC29A5&currency=USD&timestampIn=1566100800&timestampOut=1566187200&numNights=1&numRooms=1&roomNights=1&numAdults=2&numChildren=0&timezone=CAT&regionName=&cityName=Nyagatare&stateOrCityName=Nyagatare&countryName=Rwanda&countryAbbrev=RW&destinationName=EPIC%20Hotel%20&%20Suites&locationType=Accommodation&nearestAirport=KGL&propId=13305964&propName=EPIC%20Hotel%20&%20Suites&brandName=&stDest=Nyagatare%2CRwanda&geoName=Nyagatare&geoParentId=3685402&geoParentName=Eastern%20Province&locPrice1=110&loc1=13305964&productIds=[%22%22,%22d13305964enUS%22,%226387380enUS%22]&productIdsShort=,d13305964enUS,6387380enUS&device=Desktop&fbDevice=1&device2=desktop&userGeo=46365&siteType=d&trueServlet=Hotel_Review&genTrueServlet=Hotel_Review&fbTrueServlet=H&fbRetargetingType=1&servlet=Hotel_Review&geoFeedBucket=all&serverName=www.tripadvisor.com&puid=XUp9lAoQJXkAAqpyCiEAAABf&isMobileDevice=n&rtPath=www.tamgrt.com/RT&random=3620079683&dmpAudienceIds=10336,15201,10306,16258,10307,15203,15462,15370,15338,15339,15340,15309,10292,15444,15541,15542,15766,15191,15192,15193,15289,16062&taSplit=2&mcid=17932&fbChannel=2&isOrganic=false&criteoDedup=0&tasource=SEO&geo=6387380&isClickoutYN=no&isLoggedIn=Y&securelyLoggedIn=Y&memberId=345298329&hashedMemberId=29299bfd6651393e9ced9ff3ee2dbe56a90a55663a34120529529ebb4370eba7&stuid=NY1QkB0y0N6-H_cNivhho813eepRuNicjpYba1Ldix9I2Mmcqwc9RO0U-EvzW-jw&countryAlpha2=US&criteoPartnerId=4653&criteoAttractionPartnerId=26270&criteoHotelAcct=%5Ban%3Dweb-hotels-tripadvisor.com%26cn%3Dus%26ln%3Den%2Can%3Dweb-hotels-0-tripadvisor.com%26cn%3Dus%26ln%3Den%2Can%3Dweb-hotels-1-tripadvisor.com%26cn%3Dus%26ln%3Den%2Can%3Dweb-hotels-2-tripadvisor.com%26cn%3Dus%26ln%3Den%5D&flight_originid=&flight_destid=&flight_startdate=2019-08-21&flight_enddate=2019-08-28&dynx_itemid=null_null_20190821_20190828&flight_num_tix=1&numSeniors=0&attractionShoppingCartTotalPriceUSD=0.00&facebookuvm_v2UlbScore=0.6850619520000001&facebookuvm_v2UlbBucket=19&fbUlbMultiplier=0.1806952325697003&facebookUlbScore=1.0259451806797&facebookUlbBucket=74&googleExperimentSegment=test&googleUlbScore=0.680341249&googleUlbBucket=2&googleuvm_v2UlbBucket=3&googleuvm_v2UlbScore=0.6850619520000001&UVMBESTSCORE=0.33&UVMSCOPE=UVM_V2&UVMSAVEABLE=0&googleuvm_v2.1UlbBucket=1&googleuvm_v2.1UlbScore=0.3344735808667&googleuvm_v2.1UlbBucketParamName=uvm_display_desktop_bucket&googleuvm_complexUlbBucket=1&googleuvm_complexUlbScore=0.08198326826095581&criteoUlbScore=0.3344735808667&criteoUlbBucket=1&criteoUlbScoreCurrent=0.3344735808667&criteoUlbBucketCurrent=1&DBISCORE=0.042144715161583295&DBIFLAG=false&mofSlice=40&mofLastUpdated=20190806&gclid=&refHost=duckduckgo.com&smarterTravelPixelID=gqLWKHSnTxes4YmmtgWkqA&smarterTravelPixelDomain=p.smartertravel.com&isSTConversion=false&googleCRMId=afa61511735606abe9895647eacf3dfcfd2bd526&rexSplit=c&NanigansTestSegment=0&is_default_dates=Yes&pixelName=facebook_tv_landing -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
</head>
<body>
  <script src="./inferredEvents.js" async=""></script><script src="./547333922434412" async=""></script><script src="./identity.js" async=""></script><script async="" src="./fbevents.js"></script><script type="text/javascript">
    // Pull params from URL (argdict maps keys to values or arrays of values)
    var argdict = {};
    var args = window.location.hash.substring(1).split("&");
    for (var i = 0; i < args.length; i++) {
      var pair = args[i].split("=");

      if (typeof argdict[pair[0]] === "undefined") {
        argdict[pair[0]] = pair[1];
      } else if (typeof argdict[pair[0]] === "string") {
        argdict[pair[0]] = [argdict[pair[0]], pair[1]];
      } else {
        argdict[pair[0]].push(pair[1]);
      }
    }

    // Determine pixel type.
    var fbPixelName = null;
    var isStandardEvent = true;
    if (argdict.pixelType === 'PAGEVIEW') {
      fbPixelName = 'PageView';
    }
    else if (argdict.pixelType === 'MEMBER_REGISTRATION_FORM') {
      fbPixelName = 'MemberRegistrationForm';
      var isStandardEvent = false;
    }
    else if (argdict.pixelType === 'MEMBER_CREATE') {
      fbPixelName = 'MemberCreate';
      var isStandardEvent = false;
    }

    if (fbPixelName !== null) {
      var fbContentType = '["hotel","destination"]';
      var applicationId = encodeURIComponent(250701451714610);
      // event name for Dynamic Product Ads
      var eventName = encodeURIComponent(fbPixelName);
      var fbCategory = encodeURIComponent(argdict.fbTrueServlet);
      var servlet = encodeURIComponent(argdict.servlet);
      var fbDevice = encodeURIComponent(argdict.fbDevice);
      var fbDateIn = encodeURIComponent(argdict.fbDateIn);
      var fbDateOut = encodeURIComponent(argdict.fbDateOut);
      var geoId = encodeURIComponent(argdict.geoId);
      // if no property id, returns the geo's most popular property id if there is one
      var PropId = encodeURIComponent(argdict.propId ? argdict.propId : argdict.geoMostPop);
      var mcid = encodeURIComponent(argdict.mcid);
      var countryID = encodeURIComponent(argdict.countryID);
      var fbUserUnique = encodeURIComponent(argdict.fbUserUnique);
      var userUnique = encodeURIComponent(argdict.userUnique);
      var ulbBucket = encodeURIComponent(argdict.facebookUlbBucket);
      var ulbScore = encodeURIComponent(argdict.facebookUlbScore);
      var fbRegion = encodeURIComponent(argdict.regionName);
      var fbCity = encodeURIComponent(argdict.cityName);
      var fbCountry = encodeURIComponent(argdict.countryName);
      var fbDestinationName = encodeURIComponent(argdict.destinationName);
      var fbLocationType = encodeURIComponent(argdict.locationType);
      var fbRetargetingType = encodeURIComponent(argdict.fbRetargetingType);
      var fbUlbMultiplier = encodeURIComponent(argdict.fbUlbMultiplier);

      // Only one model will be calculated for each user - v2, v2.1, or complex
      var uvmV2Bucket;
      var uvmV2Score;
      if (argdict.hasOwnProperty('facebookuvm_complexUlbBucket') && argdict.hasOwnProperty('facebookuvm_complexUlbScore')) {
        uvmV2Bucket = argdict.facebookuvm_complexUlbBucket;
        uvmV2Score = argdict.facebookuvm_complexUlbScore;
      }
      else if (argdict.hasOwnProperty('facebookuvm_v2.1UlbBucket') && argdict.hasOwnProperty('facebookuvm_v2.1UlbScore')) {
        uvmV2Bucket = argdict['facebookuvm_v2.1UlbBucket'];
        uvmV2Score = argdict['facebookuvm_v2.1UlbScore'];
      }
      else {
        uvmV2Bucket = argdict.facebookuvm_v2UlbBucket;
        uvmV2Score = argdict.facebookuvm_v2UlbScore;
      }
      uvmV2Bucket = encodeURIComponent(uvmV2Bucket);
      uvmV2Score = encodeURIComponent(uvmV2Score);

      var dateIn;
      var dateOut;
      if (argdict.timezone !== undefined)
      {
        // Send checkin and checkout dates with time of midnight (actually 11:59pm to keep the date the same) and timezone of the hotel
        dateIn = argdict.dateIn + 'T23:59:59' + argdict.timezone;
        dateOut = argdict.dateOut + 'T23:59:59' + argdict.timezone;
      }
      else
      {
        dateIn = argdict.dateIn;
        dateOut = argdict.dateOut;
      }

      // product ids for Dynamic Product Ads. Currently returning a property product followed by a geo product to ensure the geo product is the last product fired
      var productIds = [];
      if (typeof argdict['loc1'] !== 'undefined') {
        // On Hotels page, loc1 is the top commerce hotel for the geo in the POS.
        // On properties page, loc1 is the actual hotel.
        // In all other pages(e.g. SmartDeals page), loc1 is the top pop hotel of the geo.
        productIds.push(encodeURIComponent('d' + argdict['loc1'] + argdict.locale.replace('_', '')));
      }
      productIds.push(encodeURIComponent(geoId + argdict.locale.replace('_' , '')));

      // For obfuscated pixel key mapping, see FB_PIXEL_KEY_MAPPING in PageMoniker.java
      // These are used for Facebook DPA ad creation, do not modify without consulting vwang@ or om-fb@
      var params = {
        'application_id' : applicationId,
        'content_type' : fbContentType,
        'content_ids' : productIds,
        'region' : fbRegion,
        'city' : fbCity,
        'country' : fbCountry,
        'destination' : fbDestinationName,
        'types' : fbLocationType,
        'external_id': fbUserUnique,
        'FB1' : fbDateIn,           // fbCheckInDate
        'FB2' : fbDateOut,          // fbCheckOutDate
        'FB3' : geoId,              // destinationCode
        'FB4' : fbDevice,           // fbDevice
        'FB5' : countryID,          // IP country id
        'FB7' : mcid,               // mcid
        'FB8' : fbCategory,         // fbProductType
        'FB9' : PropId,             // propertyID
        'FB10': userUnique,         // userUnique - this is passed so Facebook can match users with data we provided in an offline file (5/13/15)
        'FB13': ulbBucket,          // User level bid bucket (UVM v1)
        'FB14': ulbScore,           // User level bid score (UVM v1)
        'FB17': fbRetargetingType,  // Retargeting type
        'FB18': fbUlbMultiplier,    // User level bid multiplier
        'FB27': uvmV2Bucket,        // ULB bucket for v2 (for testing)
        'FB28': uvmV2Score,         // ULB score for v2 (for testing)
        'user_bucket': uvmV2Bucket  // Parameter for FB's new ULB product
      };

      params.checkin_date = dateIn;
      params.checkout_date = dateOut;

      //The following code is copy pasted from facebook.
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      // End of copy paste from facebook.

      // Note: Using a variable for the pixel id instead of passing it directly causes FB's pixel helper chrome plug-in to break
      if (typeof argdict['fbHEml'] !== 'undefined') {
        fbq('init', '547333922434412', {em: encodeURIComponent(argdict.fbHEml)});
      }
      else {
        fbq('init', '547333922434412');
      }

      if (isStandardEvent) {
        fbq('track', eventName, params);
      } else {
        fbq('trackCustom', eventName, params);
      }
    }
  </script>


</body></html>