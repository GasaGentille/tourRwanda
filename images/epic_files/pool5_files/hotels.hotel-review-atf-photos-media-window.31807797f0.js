($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/hotels.hotel-review-atf-photos-media-window",d:["vendor-react-libs","@ta/hotels.media-album-parts","@ta/hotels.media-album-configuration","vendor-babel","vendor-redux-libs","vendor-common","@ta/styleguide.skeleton","ta-common","lithium-platform","ta-platform","@ta/media-viewer.opener","@ta/public.graphql-util","@ta/media.face-pile"],e:["./packages/hotels/hotel-review-atf-photos-media-window/compositionRoot.jsx"],x:{"./packages/hotels/hotel-review-atf-photos-media-window/compositionRoot.jsx":["default","AlbumThumbnailIcon","AlbumThumbnailOverlay","ATFNoPhotoCTA","openPhotoviewer","ssrQueries"]},m:{"./packages/hotels/hotel-review-atf-photos-media-window/compositionRoot.jsx":function(e,t,a){"use strict";a.r(t);var o=a("react"),n=a("@ta/hotels.media-album-parts"),i=a("@ta/hotels.media-album-configuration"),r=a("react-redux"),l=a("lodash/get"),s=a.n(l),c=a("@ta/common.tracking"),u=a.n(c),d=a("@ta/common.is-visible"),m=a("@ta/public.graphql-util"),h=a("@ta/common.classnames"),p=a.n(h),v=a("@ta/common.features"),f=a("@ta/media-viewer.opener"),w=function e(t,a,o,i){if(Object(v.featureIsEnabled)("hr_mediaviewer_web_component"))Object(f.openMediaViewer)(t,o,i);else{var r={detail:t,geo:a,albumViewMode:"grid",updateType:"full",albumId:o,filter:7};i>0&&(o===n.AlbumTypes.PANO_ALBUM?r.panoId="p".concat(i):r.ff=i,r.baseMediaId=i,r.albumViewMode="hero"),require(["trjs!actions/openRespPhotoViewer"],function(e){e.openWithOptions(r)})}},b=a("@ta/styleguide.icon"),g=a("@ta/media.face-pile"),_="hotels-hotel-review-atf-photos-media-window-Albums-Icon__absolute--Sz_iv",I="hotels-hotel-review-atf-photos-media-window-Albums-Icon__overlayIcon--21nnW",A="hotels-hotel-review-atf-photos-media-window-Albums-Icon__iconWrapper--1EVfa",k=function e(){return o.createElement("div",{className:A},o.createElement(b.Icon,{name:"camera-fill",className:p()(I,_)}))},C=function e(t){var a=t.albumId,i=t.avatarData;switch(a){case n.AlbumTypes.TRAVELER_ALBUM:return function e(t){if(!t)return k();var a=t.filter(function(e){return!(!e.userProfile||!e.userProfile.avatar)}).reduce(function(e,t){return e[t.userProfile.avatar.id]=t.userProfile.avatar,e},{}),n=Object.keys(a).reduce(function(e,t){return e.push(a[t]),e},[]).map(function(e){return{withBorder:!0,alt:"",size:"small",photo:{photoSizes:s()(e,"photoSizes",[])}}}).filter(function(e){return!!e}).slice(0,3);return n.length<2?k():o.createElement("span",{className:"hotels-hotel-review-atf-photos-media-window-Albums-Icon__facePile--1qgTW"}," ",o.createElement(g.FacePile,{avatarProps:n,maxFaces:3}))}(i);case n.AlbumTypes.STORYBOARD_ALBUM:return function e(){return o.createElement("div",{className:A},o.createElement(b.Icon,{name:"bubble-rating-bg",className:"hotels-hotel-review-atf-photos-media-window-Albums-Icon__darkIconBg--2kQ2r"}),o.createElement(b.Icon,{name:"play",className:p()(I,_)}))}();case n.AlbumTypes.PANO_ALBUM:return function e(){return o.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Albums-Icon__iconWrapperPano--3eV9B"},o.createElement("div",{className:p()(_,"hotels-hotel-review-atf-photos-media-window-Albums-Icon__darkIconBgPano--3WLjh")}),o.createElement(b.Icon,{name:"refresh",className:p()("hotels-hotel-review-atf-photos-media-window-Albums-Icon__overlayIconLarge--1nFR9",_)}),o.createElement("span",{className:p()(_,"hotels-hotel-review-atf-photos-media-window-Albums-Icon__pano360--3bBt_")},"360"))}();case n.AlbumTypes.ROOM_AND_SUITE_ALBUM:return function e(){return o.createElement("div",{className:A},o.createElement(b.Icon,{name:"hotels",className:p()(I,_)}))}();case n.AlbumTypes.DINING_ALBUM:return function e(){return o.createElement("div",{className:A},o.createElement(b.Icon,{name:"restaurants",className:p()(I,_)}))}();default:return k()}};C.defaultProps={avatarData:[]};var P=C,N=function e(t){var a=t.renderIcon&&"function"==typeof t.renderIcon?t.renderIcon():e.defaultProps.renderIcon();return o.createElement("div",{className:p()("hotels-hotel-review-atf-photos-media-window-Albums-Overlay__imageOverlay--1dPs0",t.title?"hotels-hotel-review-atf-photos-media-window-Albums-Overlay__imageOverlayGray--2vR4q":"")},a,t.title,t.count&&o.createElement("span",{className:"hotels-hotel-review-atf-photos-media-window-Albums-Overlay__thinText--Zy5zU"}," (",t.count,") "))},E=function e(){return o.createElement(b.Icon,{name:"play",className:"hotels-hotel-review-atf-photos-media-window-Albums-Overlay__icon--BNwYQ"})};E.displayName="DefaultRenderIcon",N.defaultProps={title:"",count:0,renderIcon:E};var T=N,y={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TravelerAlbumAvatars"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LocationInformation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"travelerAlbum"},name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"albumIds"},value:{kind:"ListValue",values:[{kind:"IntValue",value:"107"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10"}},{kind:"ObjectField",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:338}};y.loc.source={body:"0436e30856cb"};var O=y,S="hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumThumbnailWrap--1LzxS",M=function e(t){var a,i=t.albums,r=t.locationId,l=t.geoId,c=t.avatarData,m=t.loading;return i&&0!==i.length&&i.filter&&r&&l?(a=m?function e(t){for(var a=[],o=0;o<t;o++)a.push({albumId:-o,name:"",totalMediaCount:0,mediaList:[]});return a}(3):function e(t){return t.filter(function(e){return 0!==e.mediaList.length}).slice(0,3)}(i)).length<2?null:o.createElement("div",{className:p()("hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumsContainer--3ntPo","hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumColumnWrap--28Xvc"),key:"albums-container"},function e(t,a,i,r,l){return a.map(function(e){var a=e.albumId,c=e.name,m=e.totalMediaCount,h=e.mediaList,v=a===n.AlbumTypes.PANO_ALBUM,f=o.createElement("div",{key:a,className:p()(v?"hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumThumbnailWrapNoBorder--3kreb":S)},o.createElement(n.Thumbnail,{className:"hotels-hotel-review-atf-photos-media-window-Albums-Pane__albumThumb--7OyEj",photoSizes:s()(h,"[0].photoSizes",[]),onClick:function e(){u()({module:"photoviewer",action:"atf_album_click",context:"".concat(a)}),w(i,r,a,a===n.AlbumTypes.STORYBOARD_ALBUM?s()(h,"[0].mediaId",void 0):-1)},loading:t},o.createElement(T,{title:c,count:m,renderIcon:function e(){return o.createElement(P,{albumId:a,avatarData:l})}})));return v?o.createElement(d.HasBeenVisible,{onVisible:function e(){u()({module:"atf_panos_album",action:"in_view",value:0})},key:"track-".concat(a)},function(e){return o.createElement("div",{ref:e,className:S},f)}):f})}(m,a,r,l,c)):null},L=a("@babel/runtime/helpers/esm/classCallCheck"),x=a.n(L),R=a("@babel/runtime/helpers/esm/createClass"),W=a.n(R),F=a("@babel/runtime/helpers/esm/possibleConstructorReturn"),B=a.n(F),U=a("@babel/runtime/helpers/esm/getPrototypeOf"),j=a.n(U),D=a("@babel/runtime/helpers/esm/inherits"),z=a.n(D),V=a("@babel/runtime/helpers/esm/assertThisInitialized"),G=a.n(V),q=a("@babel/runtime/helpers/esm/defineProperty"),H=a.n(q),Q=a("@ta/styleguide.skeleton"),Y=a.n(Q),$=a("@ta/media.common"),J=a("@ta/styleguide.button"),X=a.n(J),K=a("@ta/common.i18n");function Z(){u()({module:"photoviewer",action:"click",context:"add_photo_click"})}var ee=function e(t){var a=t.locationId,n=t.geoId,i="/PostPhotos-g".concat(n,"-d").concat(a);return o.createElement("a",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-ATFNoPhotoCTA__addPhotoLinkBlock--1gb1C",href:i,target:"_blank",onClick:Z},o.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-ATFNoPhotoCTA__iconWrap--2iN-q"},o.createElement(b.Icon,{className:"hotels-hotel-review-atf-photos-media-window-Carousel-ATFNoPhotoCTA__cameraIcon--3Erxu",name:"camera"})),o.createElement(X.a,{type:"primary",size:"large"},Object(K.localize)("mw_add_photo_ffffdfce")))},te=Object(n.WithContainerDimensions)(n.MediaCarousel,function e(t){switch(t){case"MOBILE":return{clientWidth:400,clientHeight:200};case"TABLET":return{clientWidth:425,clientHeight:350};case"DESKTOP":default:return{clientWidth:610,clientHeight:350}}}),ae=function(e){function t(){var e,a;x()(this,t);for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return a=B()(this,(e=j()(t)).call.apply(e,[this].concat(r))),H()(G()(G()(a)),"doAdjustPortraitPhotos",function(e){return"MOBILE"!==e}),H()(G()(G()(a)),"isAlbumThinGeo",function(){return a.props.albumId&&a.props.albumId===n.AlbumTypes.THIN_GEO_PHOTO_ALBUM}),H()(G()(G()(a)),"showIndicatorDots",function(){return"MOBILE"===a.props.viewportCategory}),H()(G()(G()(a)),"renderPhotoCountOverlay",function(){var e="MOBILE"===a.props.viewportCategory?"xsmall":"regular",t=a.showIndicatorDots()?"none":void 0;return a.props.totalMediaCount>1?o.createElement(n.PhotoCount,{onClick:function e(){u()({module:"photoviewer",action:"atf_allphotos_click",context:"".concat(a.props.locationId)}),w(a.props.locationId,a.props.geoId,n.AlbumTypes.ALL_ALBUMS,-1)},fontSize:e,icon:"camera-fill",totalCount:a.props.totalMediaCount,linkText:a.props.albumName||Object(K.localize)("photos_module_carousel_view_all_photos_plain"),background:t}):null}),a}return z()(t,e),W()(t,[{key:"render",value:function e(){var t=this.props,a=t.locationId,i=t.geoId,r=t.media,l=t.totalMediaCount,s=t.getNextPage,c=t.carouselIndex,d=t.updateCarouselIndex,m=t.postPhotosUrl,h=t.writeReviewUrl,v=t.locationName,f=Math.max(Math.min(c,r.length-1),0),b=20*Math.floor(f/20),g=Math.min(b+20,r.length),_=r[f].mediaId&&!this.isAlbumThinGeo()?function(e){u()({module:"photoviewer",action:"atf_hero_click",context:"".concat(e)}),w(a,i,n.AlbumTypes.ALL_ALBUMS,e)}:null,I=!!_&&this.renderPhotoCountOverlay;return!I&&this.isAlbumThinGeo()&&(I=function e(){return o.createElement(n.PhotoSource,{textClassName:"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__backupPhotoText--MhzBY",text:Object(K.localize)("hr_lowcontent_geo_photo_disclaim_2")})}),o.createElement("div",{className:p()("hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carouselWrap--QMjPF",this.isAlbumThinGeo()?"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carouselWrapMobileThinGeo--JYJIG":"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carouselWrapMobileRegular--2PRvC","hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carouselContainer--2YROw","hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__carousel-container--3QXmw"),key:"carousel-container"},o.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__flexColumn--1ESad"},o.createElement(te,{width:"100%",height:"100%",media:r,totalCount:l,uniqueId:"".concat(a),showIndicatorDots:this.showIndicatorDots(),onClick:_,onLoadLast:function e(){return"function"==typeof s&&s()},loadLastThreshold:19,onNextClick:function e(){u()({module:"photoviewer",action:"atf_hero_arrow_click"})},onPrevClick:function e(){u()({module:"photoviewer",action:"atf_hero_arrow_click"})},displayIndex:f,imageFitStrategy:this.doAdjustPortraitPhotos(this.props.viewportCategory)?"calculated":"cover",backgroundColor:"black",showCta:!!_,hideArrows:this.isAlbumThinGeo(),renderOverlay:I}),l>10&&o.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__photoStripContainer--2sbFy"},o.createElement(n.Mediastrip,{media:r.slice(b,g),selectedIndex:f%20,onMediaSelected:function e(t){d("".concat(a),b+t),r.length!==l&&r.length-b-t<20&&"function"==typeof s&&s(),u()({module:"photoviewer",action:"atf_previewthumb_click"})},numItemsInRow:10})),this.isAlbumThinGeo()&&o.createElement("div",{className:"hotels-hotel-review-atf-photos-media-window-Carousel-CarouselWithThumbnails__ctaContainer--3baLk"},o.createElement(n.ThinGeoCTA,{postPhotosUrl:m||"/PostPhotos-d".concat(a),writeReviewUrl:h||"/UserReview-d".concat(a),locationName:v||""}))))}}]),t}(o.PureComponent);H()(ae,"defaultProps",{getNextPage:function e(){}});var oe=Object(r.connect)(function(e,t){return{viewportCategory:e.meta.device.viewportCategory,carouselIndex:Object(n.getMediaCarouselState)(e).currentIndex["".concat(t.locationId)]||0}},{updateCarouselIndex:n.MEDIA_CAROUSEL_ACTIONS.updateCurrentIndex})(ae),ne=function(e){function t(){var e,a;x()(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=B()(this,(e=j()(t)).call.apply(e,[this].concat(i))),H()(G()(G()(a)),"renderCarousel",function(e){var t=e.loading,n=e.media,i=e.getNextPage,r=a.props,l=r.album,s=r.locationId,c=r.geoId,u=r.postPhotosUrl,d=r.writeReviewUrl,m=r.locationName,h=l.totalMediaCount,p=l.albumId,v=l.name;return!t||n&&h?n&&0!==h?o.createElement(oe,{locationId:s,geoId:c,media:n,totalMediaCount:h,getNextPage:i,albumId:p,albumName:v,postPhotosUrl:u,writeReviewUrl:d,locationName:m}):o.createElement(ee,{locationId:s,geoId:c}):o.createElement(Y.a,{height:"100%",width:"100%"})}),a}return z()(t,e),W()(t,[{key:"render",value:function e(){var t=this.props,a=t.loading,i=t.locationId,r=t.geoId,l=t.client,s=t.initOffset,c=t.album;if(a&&!c||!i)return o.createElement(Y.a,{height:"100%",width:"100%"});if(!r)throw new Error("No geoId provided to CarouselPane");if(!c)return o.createElement(ee,{locationId:i,geoId:r});var u=c.totalMediaCount,d=c.albumId,m=c.mediaList,h=c.dataStrategy;return o.createElement(n.AlbumPagingProvider,{locationId:i,albumId:d,client:l,dataStrategy:h,filter:Object($.getMediaFilterToRetrieveAllPhotos)(),initMedia:m,initOffset:s,totalMediaCount:u,pageSize:20,uniqueId:"".concat(i),render:this.renderCarousel})}}]),t}(o.PureComponent),ie=function e(t){var a=t.renderCarouselPane,n=t.renderAlbumPane,i=t.renderBadge,r=a(),l=n(),s=i();return o.createElement("div",{className:p()("hotels-hotel-review-atf-photos-media-window-AtfWindow__fullHeight--2G86v","hotels-hotel-review-atf-photos-media-window-AtfWindow__mediaWindow--1YklV")},r,l,s)};a.d(t,"ssrQueries",function(){return me}),a.d(t,"AlbumThumbnailIcon",function(){return P}),a.d(t,"AlbumThumbnailOverlay",function(){return T}),a.d(t,"ATFNoPhotoCTA",function(){return ee}),a.d(t,"openPhotoviewer",function(){return w});var re={ROOT_FIELDS:[],LOCATION_FIELDS:[],SSR_QUERIES:[]},le=Object(n.connectBadge)(re),se=function e(t,a,o){return Object(r.connect)(function(e,n){var i=n.location,r=n.windowPanes,l=n.loading,c=s()(i,"locationId",null)||s()(e,"page.detailId",null)||s()(e,"page.transData.location.locationId",0);return{locationId:c,album:s()(r,"[".concat(t,"][0]"),s()(e,"page.transData.album",null)),geoId:s()(e,"page.geoId",0),client:a,initOffset:o,loading:l,postPhotosUrl:s()(i,"postPhotosUrl","/PostPhotos-d".concat(c)),writeReviewUrl:s()(i,"writeUserReviewUrl","/UserReview-d".concat(c)),locationName:s()(i,"name",null)}})(ne)}(0,"hra",20),ce=function e(t,a){return t.LOCATION_FIELDS.push(Object(m.getFragment)(O,"TravelerAlbumAvatars")),Object(r.connect)(function(e,t){var o=t.location,n=t.windowPanes,i=t.loading;return{albums:s()(n,"[".concat(a,"]"),null),locationId:s()(o,"locationId",0),avatarData:s()(o,"travelerAlbum[0].photos",null),geoId:e.page.geoId,loading:i}})(M)}(re,1),ue=function e(t,a){return function e(t){return o.createElement(ie,{renderCarouselPane:function e(){return a.carouselPane(t)},renderAlbumPane:function e(){return a.albumPane(t)},renderBadge:function e(){return a.badge(t)}})}}(0,{carouselPane:function e(t){return o.createElement(se,t)},albumPane:function e(t){return o.createElement(ce,t)},badge:function e(t){return o.createElement(le,t)}}),de=Object(n.connectMediaWindowContainer)(re,"hra",Object(i.getConfigurationForHrAtfMediaWindow)(),function(e){return o.createElement(ue,e)}),me=(t.default=de,function e(t){return re.SSR_QUERIES.map(function(e){return e(t)})})}}});
//# sourceMappingURL=hotels.hotel-review-atf-photos-media-window.31807797f0.js.map